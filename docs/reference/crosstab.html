<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Pretty 2, 3 or 4-way cross-tabulations — crosstab • descriptio</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Pretty 2, 3 or 4-way cross-tabulations — crosstab"><meta property="og:description" content="Displays pretty 2, 3 or 4-way cross-tabulations, from possibly weighted data, and with the opportunity to color the cells of the table according to a local measure of association (phi coefficients, standardized residuals or PEM)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">descriptio</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Article_eng.html">Descriptive analysis of statistical associations with descriptio</a>
    </li>
    <li>
      <a href="../articles/Article_fr.html">L'analyse descriptive des associations entre variables avec descriptio</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/nicolas-robette/descriptio/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Pretty 2, 3 or 4-way cross-tabulations</h1>
    
    <div class="hidden name"><code>crosstab.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Displays pretty 2, 3 or 4-way cross-tabulations, from possibly weighted data, and with the opportunity to color the cells of the table according to a local measure of association (phi coefficients, standardized residuals or PEM).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">crosstab</span><span class="op">(</span><span class="va">x</span>, </span>
<span>         <span class="va">y</span>,</span>
<span>         xstrata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>         ystrata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>         weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>         stat <span class="op">=</span> <span class="st">"rprop"</span>,</span>
<span>         show.n <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>         show.cramer <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>         na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>         na.value <span class="op">=</span> <span class="st">"NAs"</span>,</span>
<span>         digits <span class="op">=</span> <span class="fl">1</span>,</span>
<span>         sort <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>         color.cells <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>         measure <span class="op">=</span> <span class="st">"phi"</span>,</span>
<span>         limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>         min.asso <span class="op">=</span> <span class="fl">0.1</span>, </span>
<span>         palette <span class="op">=</span> <span class="st">"PRGn"</span>,</span>
<span>         reverse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>the row categorical variable</p></dd>

  <dt>y</dt>
<dd><p>the column categorical variable</p></dd>

  <dt>xstrata</dt>
<dd><p>optional categorical variable to stratify the table by rows. Default is NULL, which means no row strata.</p></dd>

  <dt>ystrata</dt>
<dd><p>optional categorical variable to stratify the table by columns. Default is NULL, which means no column strata.</p></dd>

  <dt>weights</dt>
<dd><p>numeric vector of weights. If NULL (default), uniform weights (i.e. all equal to 1) are used.</p></dd>

  <dt>stat</dt>
<dd><p>character. Whether to compute a contingency table ("freq", default), percentages ("prop"), row percentages ("rprop") or column percentages ("cprop").</p></dd>

  <dt>show.n</dt>
<dd><p>logical. Whether to display frequencies (between brackets) in addition to the percentages. Ignored if stat = "freq". Default is FALSE.</p></dd>

  <dt>show.cramer</dt>
<dd><p>logical. If TRUE (default), Cramer's V measure of association is displayed beside the table.</p></dd>

  <dt>na.rm</dt>
<dd><p>logical, indicating whether NA values should be silently removed before the computation proceeds. If FALSE (default), an additional level is added to the variables (see <code>na.value</code> argument).</p></dd>

  <dt>na.value</dt>
<dd><p>character. Name of the level for NA category. Default is "NAs". Only used if na.rm = FALSE.</p></dd>

  <dt>digits</dt>
<dd><p>integer. The number of digits (default is 1). If NULL, the results are not rounded.</p></dd>

  <dt>sort</dt>
<dd><p>character. If "both", rows and columns are sorted according to the first factor of a correspondence analysis of the contingency table. If "x", only rows are sorted. If "y", only columns are sorted. If "none" (default), no sorting is done.</p></dd>

  <dt>color.cells</dt>
<dd><p>logical, indicating whether the cells of the table should be colored according to local measures of association. Default is FALSE.</p></dd>

  <dt>measure</dt>
<dd><p>character. The measure of association used to color the cells. Can be "phi" for phi coefficient (default), "std.residuals" for standardized residuals, "adj.residuals" for adjusted standardized residuals or "pem" for local percentages of maximum deviation from independence. Only used if color.cells = TRUE.</p></dd>

  <dt>limits</dt>
<dd><p>a numeric vector of length 2 providing limits of the scale. Default is c(-1,1). Only used if color.cells = TRUE.</p></dd>

  <dt>min.asso</dt>
<dd><p>numerical value. The cells with a local association below min.asso (in absolute value) are kept blank. Only used if color.cells = TRUE.</p></dd>

  <dt>palette</dt>
<dd><p>The colours or colour function that values will be mapped to (see details).</p></dd>

  <dt>reverse</dt>
<dd><p>Whether the colors (or color function) in palette should be used in reverse order. For example, if the default order of a palette goes from blue to green, then reverse = TRUE will result in the colors going from green to blue. Default is FALSE. Only used if color.cells = TRUE.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The function uses <code>gtsummary</code> package to build the cross-tabulation, and then <code>gt</code> package to finalize the layout and color the cells. Weights are handled silently with <code>survey</code> package.</p>
<p>Besides, the function is compatible with the attribute labels assigned with <code>labelled</code> package : these labels are displayed automatically.</p>
<p>The <code>palette</code> argument can be any of the following :
1. A character vector of RGB or named colours. Examples: palette(), c("#000000", "#0000FF", "#FFFFFF"), topo.colors(10)
2. The name of an <code>RColorBrewer</code> palette, e.g. "BuPu" or "Greens".
3. The full name of a <code>viridis</code> palette: "viridis", "magma", "inferno", or "plasma".
4. A function that receives a single value between 0 and 1 and returns a colour. Examples: colorRamp(c("#000000", "#FFFFFF"), interpolate="spline").</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    

<p>An object of class <code>gt_tbl</code>.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Nicolas Robette</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="assoc.twocat.html">assoc.twocat</a></code>,<code><a href="weighted.table.html">weighted.table</a></code>, <code><a href="phi.table.html">phi.table</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">crosstab</span><span class="op">(</span><span class="va">Movies</span><span class="op">$</span><span class="va">Genre</span>, <span class="va">Movies</span><span class="op">$</span><span class="va">Country</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">Movies</span>, <span class="fu">crosstab</span><span class="op">(</span><span class="va">Genre</span>, <span class="va">Country</span>, ystrata <span class="op">=</span> <span class="va">ArtHouse</span>, show.n <span class="op">=</span> <span class="cn">TRUE</span>, color.cells <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://github.com/nicolas-robette" class="external-link">Nicolas Robette</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

